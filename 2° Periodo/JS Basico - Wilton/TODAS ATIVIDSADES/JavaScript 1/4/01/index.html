<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Login</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="css/style.css" />
        <script>
            var login = [];
            var senha = [];
            var nome = [];
            function validar() {
                var user = document.getElementById("txt1").value;
                var pass = document.getElementById("txt2").value;
                login = localStorage.getItem("login").split(",");
                senha = localStorage.getItem("senha").split(",");
                nome = localStorage.getItem("nome").split(",");
                for (var i = 0; i < login.length; i++) {
                    if (user == "" || pass == "") {
                        msg = "Você deve informar seu login e senha!";
                        document.getElementById("msg").innerHTML = msg;
                    } else if (login[i] != user || senha[i] != pass) {
                        if (login[i] == user) {
                            msg = "Usuário existente, porém senha inválida!";
                            document.getElementById("msg").innerHTML = msg;
                            break;
                        } else {
                            msg = "Usuário inexistente!";
                            document.getElementById("msg").innerHTML = msg;
                            console.log(senha[i]);
                        }
                    } else {
                        name = nome[i];
                        localStorage.setItem("name", name);
                        el = document.getElementById("msg");
                        el.classList.remove("text-warning");
                        el.classList.add("text-success");
                        msg = "Acesso concedido!";
                        document.getElementById("msg").innerHTML = msg;
                        window.open("index2.html", "_self");
                    }
                }
            }
        </script>
    </head>
    <body onload="">
        <div>
            <fieldset>
                <h1>Tela de Login</h1>
                <div>
                    <div id="msg" class="text-warning">
                        <p class="p-1"></p>
                    </div>
                </div>
                <form action="">
                    <div>
                        <label for="txt1">Login:</label>
                        <input type="text" id="txt1" />
                    </div>
                    <div>
                        <label for="txt2">Password:</label>
                        <input type="password" id="txt2" />
                    </div>
                    <div>
                        <div class="botao">
                            <input
                                type="button"
                                class="btn btn-success"
                                value="Acessar"
                                onclick="validar()"
                            />
                        </div>
                        <div>
                            <input
                                type="reset"
                                class="btn btn-primary"
                                value="Limpar"
                            />
                        </div>
                    </div>
                    <div>
                        <a href="/index3.html" style="color: bisque"
                            >Cadastrar!</a
                        >
                    </div>
                </form>
            </fieldset>
        </div>
    </body>
</html>
